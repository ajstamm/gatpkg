<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rank GAT Distance — rankGATdistance • NYS EPHT GAT</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rank GAT Distance — rankGATdistance"><meta property="og:description" content="This function orders the distance to neighboring polygons' centroids from
nearest to farthest and returns a vector of integers."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NYS EPHT GAT</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/gat_changelog.html">GAT Change Log</a>
    </li>
    <li>
      <a href="../articles/gat_citation.html">Citation Information</a>
    </li>
    <li>
      <a href="../articles/gat_prepare_shapefile.html">GAT Shapefile Preparation</a>
    </li>
    <li>
      <a href="../articles/gat_results_eval.html">GAT Results Evaluation</a>
    </li>
    <li>
      <a href="../articles/gat_setup.html">GAT Setup Instructions</a>
    </li>
    <li>
      <a href="../articles/gat_tech_notes.html">GAT Technical Notes</a>
    </li>
    <li>
      <a href="../articles/gat_troubleshooting.html">GAT Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/gat_tutorial.html">Tutorial 1: GAT walkthrough</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ajstamm/gatpkg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rank GAT Distance</h1>
    <small class="dont-index">Source: <a href="https://github.com/ajstamm/gatpkg/blob/master/R/rankGATdistance.R" class="external-link"><code>R/rankGATdistance.R</code></a></small>
    <div class="hidden name"><code>rankGATdistance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function orders the distance to neighboring polygons' centroids from
nearest to farthest and returns a vector of integers.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rankGATdistance</span><span class="op">(</span><span class="va">area</span>, <span class="va">nbdata</span>, <span class="va">first</span>, <span class="va">gatvars</span>, <span class="va">mergevars</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>area</dt>
<dd><p>A spatial polygons data frame.</p></dd>


<dt>nbdata</dt>
<dd><p>A data frame of (polygon) observations.</p></dd>


<dt>first</dt>
<dd><p>A data frame with one (polygon) observation.</p></dd>


<dt>gatvars</dt>
<dd><p>A list of objects created by the GAT tool. It contains the
strings myidvar, aggregator1, aggregator2, and boundary,
which are all variables in the area, and the numbers
minvalue1 and minvalue2. Both aggregator1 and aggregator2
must be numeric. The identifier, myidvar, must contain
unique values.</p></dd>


<dt>mergevars</dt>
<dd><p>A list of string objects needed to aggregate the areas in
the GAT tool. It contains mergeopt1, mergeopt2, similar1,
and similar2. The valid options for mergeopt1 and
mergeopt2 are "closest", "least", and "similar". If
"similar" is selected, similar1 and similar2 must be
numeric variables in the area and similar2 cannot equal
zero.</p></dd>

</dl></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># add GAT variables</span></span></span>
<span class="r-in"><span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_agr.html" class="external-link">st_agr</a></span><span class="op">(</span><span class="va">hftown</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"constant"</span></span></span>
<span class="r-in"><span><span class="va">centroids</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">hftown</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">centroids</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GATx"</span>, <span class="st">"GATy"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">hftown</span>, <span class="va">centroids</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_data</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">my_data</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GATx"</span>, <span class="st">"GATy"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                        crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">hftown</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">first</span> <span class="op">&lt;-</span> <span class="va">my_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"37374"</span>, <span class="va">my_data</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span> <span class="co"># only one observation</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># hard coded for simplicity; use sfdep::st_contiguity to get these obs</span></span></span>
<span class="r-in"><span><span class="va">nbdata</span> <span class="op">&lt;-</span> <span class="va">my_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"43412|02572|40794|79059"</span>, <span class="va">my_data</span><span class="op">$</span><span class="va">ID</span><span class="op">)</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span>          <span class="co"># only adjacent neighbors to first</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gatvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  myidvar <span class="op">=</span> <span class="st">"ID"</span>,             <span class="co"># character variable of unique values</span></span></span>
<span class="r-in"><span>  aggregator1 <span class="op">=</span> <span class="st">"TOTAL_POP"</span>,  <span class="co"># numeric variable</span></span></span>
<span class="r-in"><span>  aggregator2 <span class="op">=</span> <span class="st">"TOTAL_POP"</span>,  <span class="co"># numeric variable</span></span></span>
<span class="r-in"><span>  minvalue1 <span class="op">=</span> <span class="fl">5000</span>, minvalue2 <span class="op">=</span> <span class="fl">5000</span>,</span></span>
<span class="r-in"><span>  boundary <span class="op">=</span> <span class="st">"COUNTY"</span>         <span class="co"># character variable of non-unique values</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mergevars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  mergeopt1 <span class="op">=</span> <span class="st">"similar"</span>,    <span class="co"># can be similar, closest, or least</span></span></span>
<span class="r-in"><span>  mergeopt2 <span class="op">=</span> <span class="st">"closest"</span>,    <span class="co"># if "similar" fails</span></span></span>
<span class="r-in"><span>  similar1 <span class="op">=</span> <span class="st">"B_TOT"</span>,       <span class="co"># numeric variable</span></span></span>
<span class="r-in"><span>  similar2 <span class="op">=</span> <span class="st">"W_TOT"</span>        <span class="co"># numeric variable without any zeros</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># rank the distances</span></span></span>
<span class="r-in"><span><span class="va">my_rank_list</span> <span class="op">&lt;-</span> <span class="fu">rankGATdistance</span><span class="op">(</span>area <span class="op">=</span> <span class="va">hftown</span>, nbdata <span class="op">=</span> <span class="va">nbdata</span>,</span></span>
<span class="r-in"><span>                                first <span class="op">=</span> <span class="va">first</span>, gatvars <span class="op">=</span> <span class="va">gatvars</span>,</span></span>
<span class="r-in"><span>                                mergevars <span class="op">=</span> <span class="va">mergevars</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gwen Babcock and Abigail Stamm with funding from Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

