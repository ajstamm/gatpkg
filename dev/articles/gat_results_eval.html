<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GAT Results Evaluation • NYS EPHT GAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GAT Results Evaluation">
<meta property="og:description" content="gatpkg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NYS EPHT GAT</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gat_changelog.html">GAT Change Log</a>
    </li>
    <li>
      <a href="../articles/gat_citation.html">GAT Citation Information</a>
    </li>
    <li>
      <a href="../articles/gat_prepare_shapefile.html">GAT Shapefile Preparation</a>
    </li>
    <li>
      <a href="../articles/gat_results_eval.html">GAT Results Evaluation</a>
    </li>
    <li>
      <a href="../articles/gat_setup.html">GAT Setup Instructions</a>
    </li>
    <li>
      <a href="../articles/gat_tech_notes.html">GAT Technical Notes</a>
    </li>
    <li>
      <a href="../articles/gat_troubleshooting.html">GAT Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/gat_tutorial.html">Tutorial 1: GAT walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ajstamm/gatpkg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="gat_results_eval_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GAT Results Evaluation</h1>
                        <h4 data-toc-skip class="author">Abigail Stamm</h4>
            
            <h4 data-toc-skip class="date">2023-04-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ajstamm/gatpkg/blob/master/vignettes/gat_results_eval.Rmd" class="external-link"><code>vignettes/gat_results_eval.Rmd</code></a></small>
      <div class="hidden name"><code>gat_results_eval.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="gat-outputs">GAT outputs<a class="anchor" aria-label="anchor" href="#gat-outputs"></a>
</h2>
<p>The Geographic Aggregation Tool (GAT) generates and saves several files in the save folder defined by the user. Generated files include:</p>
<p><strong>Log:</strong> The log includes all of your settings and a brief list of variables created by GAT, including a data dictionary for the GATflag variable, which corresponds with the highlighted areas displayed in the plots.</p>
<p><strong>PDF of plots:</strong> The plots may also indicate potential issues in your merge, depending on the selections you made. If relevant, the plots will highlight the following geographic areas that are:</p>
<ul>
<li>Excluded by the user</li>
<li>Below the minimum aggregation value</li>
<li>Above the maximum aggregation value</li>
</ul>
<p>In addition, the compactness ratio plot will display a lighter color for areas with low compactness ratios.</p>
<p><strong>Crosswalk shapefile and associated DBF:</strong> The crosswalk shapefile, which ends with "*in.shp", is identical to your input file with a few variables added to the table by GAT. These variables are noted in the log. Note the variable GATflag, which identifies any areas excluded by the aggregation process.</p>
<p><strong>Aggregated shapefile and associated DBF:</strong> The aggregated shapefile is your final product. The variable GATid links the crosswalk and aggregated shapefiles. Again, note the variable GATflag.</p>
<p><strong>Optionally, aggregated KML file:</strong> This file will only be written if you request it and is not used in assessment.</p>
</div>
<div class="section level2">
<h2 id="figuring-out-why-areas-were-flagged">Figuring out why areas were flagged<a class="anchor" aria-label="anchor" href="#figuring-out-why-areas-were-flagged"></a>
</h2>
<p>If you notice highlighted areas in places you do not expect, there are a few things you can do. First, review your settings. Note especially aggregation minimum and maximum values, exclusion criteria, and boundary settings. All basic settings are written to the log. In addition, the advanced setting <code>adjacent = TRUE</code> in the function options for <code><a href="../reference/runGATprogram.html">runGATprogram()</a></code> may cause unexpected behavior. These will be covered in the next few subsections.</p>
<div class="section level3">
<h3 id="areas-excluded-by-the-user">Areas excluded by the user<a class="anchor" aria-label="anchor" href="#areas-excluded-by-the-user"></a>
</h3>
<p>These areas meet one or more of the exclusion criteria you provided. They will be highlighted in <strong><span style="color: CornflowerBlue;">blue-grey</span></strong> on the plots and labeled “1” in the variable GATflag in both shapefiles. Check that the areas you excluded are the areas you expected to exclude. Refer to the log or to the subtitles in the choropleth plots to verify how you defined your exclusion criteria.</p>
<p>GAT has no mechanism to include areas that meet some, but not all, exclusion criteria. For more complex exclusion rules, you should create a numeric Boolean flag (e.g. 0 = true/include, 1 = false/exclude) prior to running your shapefile through GAT. Then use that Boolean flag as your exclusion variable.</p>
</div>
<div class="section level3">
<h3 id="areas-above-maximum-aggregation-value">Areas above maximum aggregation value<a class="anchor" aria-label="anchor" href="#areas-above-maximum-aggregation-value"></a>
</h3>
<p>These areas had a value higher than your maximum value for <em>one or both</em> of your aggregation variables. They will be highlighted in <strong><span style="color: magenta;">magenta</span></strong> on the plots and labeled “5” in the variable GATflag in both shapefiles. Check that the areas highlighted are those you expected to have high values.</p>
</div>
<div class="section level3">
<h3 id="areas-below-minimum-aggregation-value">Areas below minimum aggregation value<a class="anchor" aria-label="anchor" href="#areas-below-minimum-aggregation-value"></a>
</h3>
<p>These areas may have aggregated at least once. However, they did not aggregate enough to meet your minimum aggregation value for one or both aggregation variables. They will be highlighted in <strong><span style="color: cyan;">cyan</span></strong> on the plots and labeled “10” in the variable GATflag in the aggregated shapefile. In general, any areas with GATflag = 10 are problematic. Some of the situations that cause variables to be flagged are listed below, followed by ways to address these situations.</p>
<div class="section level4">
<h4 id="causes">Causes<a class="anchor" aria-label="anchor" href="#causes"></a>
</h4>
<p>An area fails to aggregate to the minimum value because it has no neighbors eligible for aggregation. This is especially common if you use the <code>adjacent = TRUE</code> setting because it forces areas to aggregate only to areas that it physically touches.</p>
<p>If you used <code>adjacent = TRUE</code>, which is the default setting in <code><a href="../reference/runGATprogram.html">runGATprogram()</a></code>, these situations can all cause areas to fail to aggregate to the minimum value. These situations hold true both within enforced boundaries (when an area cannot merge to areas outside its boundary at all) and when boundaries are not used.</p>
<ol style="list-style-type: decimal">
<li>The area is an island. It is not physically touching any other areas.</li>
<li>The area is isolated by excluded areas. For example, the area is the tip of a peninsula, but you excluded the peninsula’s base or merging with the peninsula’s base would cause the resulting area to surpass the maximum value for one or both aggregation variables.</li>
<li>The area is at the edge of the boundary and neighbors are not eligible. The area may be unable to merge to neighbors because they are excluded or because merging with them would cause the resulting area to surpass the maximum value for one or both aggregation variables.</li>
<li>The largest possible area is smaller than the minimum aggregation value. This occurs most commonly when using enforced boundaries, when all areas within the boundary merge into a single area, but the total for that area is still smaller than the minimum aggregation value for one or both aggregation variables.</li>
</ol>
<p>If you manually set <code>adjacent = FALSE</code>, #4 above may still occur. In addition, a fifth situation is possible.</p>
<ol start="5" style="list-style-type: decimal">
<li>All neighbors within the boundary either were excluded or have high enough values for one or both aggregation variables that merging with them would cause one or both aggregation values in the resulting area to exceed the maximum aggregation values.</li>
</ol>
</div>
<div class="section level4">
<h4 id="solutions">Solutions<a class="anchor" aria-label="anchor" href="#solutions"></a>
</h4>
<p>Inspect the areas that were flagged and consider which issues above apply to your data. Review which settings are essential and which could be modified, including the merge method. The solutions you choose depend largely on your available shapefiles and your ultimate goal.</p>
<p>Most of these issues could be addressed in one of four ways. Whether any or all of these solutions are appropriate depends on what you are trying to do. You may want to try a few of them before settling on a final solution.</p>
<ol style="list-style-type: decimal">
<li>Use a shapefile with contiguous areas. Shapefiles that include cutouts for rivers, lakes, and shorelines are more likely to cause problems with aggregation, especially when using <code>adjacent = TRUE</code>.</li>
<li>If you do not need contiguous aggregated areas, use <code>adjacent = FALSE</code>. This is not recommended in most cases, but it may be appropriate for your data and purpose.</li>
<li>Relax boundary restrictions. If you checked the box to enforce boundaries, but your task does not absolutely require that you remain within boundaries, try running the aggregation without checking that box. If you defined a boundary, GAT will still try to merge within that boundary before looking for neighbors outside it.</li>
<li>Increase or remove the restriction for maximum aggregation value. Consider the highest acceptable value or try running the aggregation without defining maximum aggregation values. After aggregation is complete, check the log for the ranges of values for each aggregation variable before and after aggregating.</li>
</ol>
</div>
</div>
<div class="section level3">
<h3 id="areas-with-low-compactness-ratio">Areas with low compactness ratio<a class="anchor" aria-label="anchor" href="#areas-with-low-compactness-ratio"></a>
</h3>
<p>These areas may include long, narrow shapes or windy shapes that look like spiders or snakes. They can be identified using the compactness ratio map. In this map, areas with a low compactness ratio (longer or stringier, or sometimes donut loops) will be a lighter color than areas with a high compactness ratio (rounder or more square). For a description of compactness ratio, review the final section in the <a href="../doc/gat_tech_notes.html">Technical Notes</a>.</p>
<p>Compactness ratio may be important for your project. If so, aggregating to geographic centroids using the function option <code>adjacent = TRUE</code> is the most likely merge method to result in highly compact areas.</p>
</div>
</div>
<div class="section level2">
<h2 id="post-processing">Post-processing<a class="anchor" aria-label="anchor" href="#post-processing"></a>
</h2>
<p>This two-part process is optional. Your goal here is to create the final crosswalk file and address any flagged areas. If your aggregation has two steps (see example below), the first part of post-processing is to create a master crosswalk that contains both the original and the final area IDs.</p>
<blockquote>
<p>Example:</p>
<p>You wish to aggregate census tracts within each county to a specific population. However, for counties with populations below your minimum, you wish to aggregate those counties to other counties within each state.</p>
<p>This would require you to run the aggregation twice. First, you would process your shapefile with the boundary set to county. Then you would process the aggregated shapefile from the previous step with the boundary set to state. Afterward, you would run the included function <code>combineGATcrosswalk()</code>. This function combines the crosswalk tables from the first and second aggregations and assigns the combined table to the original crosswalk shapefile.</p>
</blockquote>
<p>For the second part of this process, run project-specific code to handle any areas that were still flagged after selecting the final aggregation settings. This code may include redefining GATid for flagged areas in the original crosswalk and reaggregating all areas based on the revised GATid variable to create final crosswalk and aggregation shapefiles.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Abigail Stamm, Gwen Babcock, Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
