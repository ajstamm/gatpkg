<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GAT Troubleshooting • NYS EPHT GAT</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GAT Troubleshooting">
<meta property="og:description" content="gatpkg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">NYS EPHT GAT</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/gat_changelog.html">GAT Change Log</a>
    </li>
    <li>
      <a href="../articles/gat_citation.html">Citation Information</a>
    </li>
    <li>
      <a href="../articles/gat_prepare_shapefile.html">GAT Shapefile Preparation</a>
    </li>
    <li>
      <a href="../articles/gat_results_eval.html">GAT Results Evaluation</a>
    </li>
    <li>
      <a href="../articles/gat_setup.html">GAT Setup Instructions</a>
    </li>
    <li>
      <a href="../articles/gat_tech_notes.html">GAT Technical Notes</a>
    </li>
    <li>
      <a href="../articles/gat_troubleshooting.html">GAT Troubleshooting</a>
    </li>
    <li>
      <a href="../articles/gat_tutorial.html">Tutorial 1: GAT walkthrough</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ajstamm/gatpkg/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GAT Troubleshooting</h1>
                        <h4 data-toc-skip class="author">Abigail Stamm,
Thomas Talbot, and Gwen Babcock</h4>
            
            <h4 data-toc-skip class="date">2023-10-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ajstamm/gatpkg/blob/master/vignettes/gat_troubleshooting.Rmd" class="external-link"><code>vignettes/gat_troubleshooting.Rmd</code></a></small>
      <div class="hidden name"><code>gat_troubleshooting.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>These errors and warnings are related to installation of the
Geographic Aggregation Tool (GAT).</p>
<div class="section level3">
<h3 id="i-got-an-error-about-xml-when-i-tried-to-install-gat">I got an error about XML when I tried to install GAT<a class="anchor" aria-label="anchor" href="#i-got-an-error-about-xml-when-i-tried-to-install-gat"></a>
</h3>
<p>On Windows, run
<code>install.packages("https://cran.r-project.org/bin/windows/contrib/4.0/XML_3.99-0.5.zip", type = "binary", repos = NULL)</code>
to install the XML package. 3.99-0.5 is the latest XML version as of
August 2020.</p>
</div>
<div class="section level3">
<h3 id="there-is-an-issue-with-the-package-installation">There is an issue with the package installation<a class="anchor" aria-label="anchor" href="#there-is-an-issue-with-the-package-installation"></a>
</h3>
<p>Usually, the issue is that vignettes fail to install. To fix this,
try one of these solutions.</p>
<ol style="list-style-type: decimal">
<li>If installing from the zipped file, uninstall gatpkg, restart R, and
reinstall gatpkg.</li>
<li>If installing from GitHub, run this code:</li>
</ol>
<blockquote>
<p>devtools::install_github(“ajstamm/gatpkg”, dependencies = TRUE,
build_vignettes = TRUE)</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="im-missing-library-permissions">I’m missing library permissions<a class="anchor" aria-label="anchor" href="#im-missing-library-permissions"></a>
</h3>
<p>This message appears in the R console:</p>
<blockquote>
<p>Error in maptools::unionSpatialPolygons(myshps$original,
aggvars$Idlist) :<br>
isTRUE(gpclibPermitStatus()) is not TRUE</p>
</blockquote>
<p>This error appears due to a conflict between the packages rgeos and
rgdal. Reinstall rgdal after each update of rgeos to fix it.</p>
<p>Both rgeos and rgdal have been removed as of v2.0.0, so this should
no longer be an issue.</p>
</div>
</div>
<div class="section level2">
<h2 id="user-input">User input<a class="anchor" aria-label="anchor" href="#user-input"></a>
</h2>
<p>These errors and warnings are related to the user input portion of
GAT.</p>
<div class="section level3">
<h3 id="on-step-3-in-the-confirm-gat-settings-dialog-all-of-my-areas-are-excluded">On step 3 in the confirm GAT settings dialog, all of my areas are
excluded<a class="anchor" aria-label="anchor" href="#on-step-3-in-the-confirm-gat-settings-dialog-all-of-my-areas-are-excluded"></a>
</h3>
<p>The areas are not excluded, but an incorrect number of areas is
displayed. If you rerun GAT and read in the settings from this run using
the “settings=” option, the correct value will be shown in the
confirmation dialog.</p>
<p>This should be fixed as of v1.61.0.</p>
</div>
<div class="section level3">
<h3 id="im-not-seeing-the-dialog-boxes">I’m not seeing the dialog boxes<a class="anchor" aria-label="anchor" href="#im-not-seeing-the-dialog-boxes"></a>
</h3>
<p>The dialog boxes may be hidden beneath other windows. Close or
minimize extraneous windows or check the taskbar for an icon that looks
like a thin quill/feather.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-gat">Running GAT<a class="anchor" aria-label="anchor" href="#running-gat"></a>
</h2>
<p>These errors and warnings may occur while GAT is processing your
shapefile.</p>
<div class="section level3">
<h3 id="gat-ran-but-my-shapefiles-wouldnt-save-and-gat-crashed">GAT ran, but my shapefiles wouldn’t save and GAT crashed<a class="anchor" aria-label="anchor" href="#gat-ran-but-my-shapefiles-wouldnt-save-and-gat-crashed"></a>
</h3>
<p>GAT occasionally has trouble getting permission to write to network
drives. Try saving to your local computer, then transferring the
files.</p>
</div>
<div class="section level3">
<h3 id="output-files-are-not-saved">Output files are not saved<a class="anchor" aria-label="anchor" href="#output-files-are-not-saved"></a>
</h3>
<p>This message appears in the R console:</p>
<blockquote>
<p>Error in writeOGR(newmapwdata, userpathout, userfileout, driver =
“ESRI Shapefile”, :<br>
GDAL Error 4: Failed to open shapefile
C:/aggtest/output/testin.shp.<br>
It may be corrupt or read-only file accessed in update mode.</p>
</blockquote>
<p>Be sure to enter a valid file name in the save dialog. Remove all
files with extensions only (such as “.shp”, “.dbf”, “.prj”) from the
directory you are trying to save to.</p>
</div>
<div class="section level3">
<h3 id="gat-is-very-slow">GAT is very slow<a class="anchor" aria-label="anchor" href="#gat-is-very-slow"></a>
</h3>
<p>The progress bars were designed to help you determine whether GAT has
stalled. Using population weighted centroids, merging shapefiles with
thousands of polygons, and saving KML files can also cause GAT to run
slowly, so allow a few minutes for each of these steps. For any steps
besides saving files and population weighting, if a progress bar is not
updating at least once a minute, it is possible GAT has stalled and you
will need to restart R.</p>
<p>Try reducing the number of geographical boundary nodes (by thinning
or simplifying polygons: see Thinning geographic boundaries in the <a href="../doc/gat_tech_notes.html">GAT technical notes</a>).</p>
</div>
<div class="section level3">
<h3 id="warning-for-classint">Warning for classInt<a class="anchor" aria-label="anchor" href="#warning-for-classint"></a>
</h3>
<p>This message appears in the R console:</p>
<blockquote>
<p>In classInt::classIntervals(newdata, n = breaks, style = “fixed”,
:<br>
n greater than number of different finite valuesreset to number of
different finite values</p>
</blockquote>
<p>This warning appears when the number of polygons or individual values
matches or is less than the number of categories in the choropleth maps.
The maps will still be drawn accurately.</p>
</div>
<div class="section level3">
<h3 id="warning-for-st_centroid">Warning for st_centroid<a class="anchor" aria-label="anchor" href="#warning-for-st_centroid"></a>
</h3>
<p>One or both of these messages appears in the R console:</p>
<blockquote>
<p>st_centroid assumes attributes are constant over geometries of x</p>
</blockquote>
<blockquote>
<p>st_centroid does not give correct centroids for longitude/latitude
data</p>
</blockquote>
<p>These warnings may appear when you first install gatpkg or if you use
the population weighting option in GAT. They are not errors and the
centroids will still write correctly, assuming you are using appropriate
coordinate systems.</p>
<p>This should be addressed as of v2.0.0.</p>
</div>
</div>
<div class="section level2">
<h2 id="output-files">Output files<a class="anchor" aria-label="anchor" href="#output-files"></a>
</h2>
<p>These errors and warnings are related to files produced by GAT.</p>
<div class="section level3">
<h3 id="variable-names-in-my-aggregated-dataset-are-truncated">Variable names in my aggregated dataset are truncated<a class="anchor" aria-label="anchor" href="#variable-names-in-my-aggregated-dataset-are-truncated"></a>
</h3>
<p>This appears to be an issue with the DBF driver used by the foreign
package. The driver identifies at least one variable name that it
interprets as too long (over 10 characters), but truncates several
variable names, not just the offender. The data otherwise still write
correctly. This should be fixed as of v1.61.0.</p>
</div>
<div class="section level3">
<h3 id="when-i-import-my-shapefile-into-my-gis-program-a-blank-map-appears">When I import my shapefile into my GIS program, a blank map
appears<a class="anchor" aria-label="anchor" href="#when-i-import-my-shapefile-into-my-gis-program-a-blank-map-appears"></a>
</h3>
<p>When importing a shapefile, be sure that the same projection is
selected in the GIS program as in the original shapefile. The
shapefile’s projection information is included in the log file generated
by GAT.</p>
</div>
<div class="section level3">
<h3 id="no-kml-file-is-produced">No KML file is produced<a class="anchor" aria-label="anchor" href="#no-kml-file-is-produced"></a>
</h3>
<p>Make sure to select that you want a KML file. Check the log file
generated by GAT to confirm that you requested one. Wait for the “NYS
Geographic Aggregation Tool is finished” message to display before
closing the windows/pop-ups generated by GAT.</p>
</div>
<div class="section level3">
<h3 id="data-do-not-appear-in-google-earth">Data do not appear in Google Earth<a class="anchor" aria-label="anchor" href="#data-do-not-appear-in-google-earth"></a>
</h3>
<p>When I click on a region in Google Earth, the data do not appear in
the description callout. The data may not appear in Google Earth 4.x, so
use Google Earth 5.0 or greater. Try clicking on the area’s link in the
left sidebar to see the data.</p>
</div>
<div class="section level3">
<h3 id="the-legend-scales-for-my-before-and-after-maps-dont-match">The legend scales for my before and after maps don’t match<a class="anchor" aria-label="anchor" href="#the-legend-scales-for-my-before-and-after-maps-dont-match"></a>
</h3>
<p>This issue occurs if there are too few polygons in the map. If the
total number of polygons is less than 2 plus the number of categories
(default is 7), the code that assigns the categories will force the
scale to be redefined. To fix this issue, use a smaller minimum value,
use a map with more polygons, or redefine the number of categories.</p>
<p>This should be fixed as of v2.0.0.</p>
</div>
<div class="section level3">
<h3 id="warning-for-large-numbers-not-writing-correctly">Warning for large numbers not writing correctly<a class="anchor" aria-label="anchor" href="#warning-for-large-numbers-not-writing-correctly"></a>
</h3>
<p>A message like this appears in the R console:</p>
<blockquote>
<p>In CPL_write_ogr(obj, dsn, layer, driver,
as.character(dataset_options), … : GDAL Message 1: Value 199678888 of
field ALAND of feature 40 not successfully written.</p>
</blockquote>
<p>This warning occurs when there are numeric fields with very large
values, such as square meters of land or water areas. In testing, the
output values matched the input values. You can verify this yourself by
checking the original DBF file against the crosswalk. To avoid this
warning, set large number fields to character or remove them from your
DBF before running GAT.</p>
</div>
<div class="section level3">
<h3 id="my-aggregation-log-did-not-write-or-did-not-write-correctly">My aggregation log did not write or did not write correctly<a class="anchor" aria-label="anchor" href="#my-aggregation-log-did-not-write-or-did-not-write-correctly"></a>
</h3>
<p>This appears to occur randomly.</p>
<p>If you do not see your log file, check that you have extensions
showing in your file manager, as “.log” may be hidden otherwise. If you
still do not see the file, you can try two things.</p>
<ol style="list-style-type: decimal">
<li>Restart R and rerun your aggregation.</li>
<li>Rerun the function <a href="../html/writeGATlog.html">writeGATlog()</a> by using
<code>settingsfile =</code> followed by the full file path to your
“*settings.Rdata” file produced by GAT.</li>
</ol>
<p>If your log wrote incorrectly, rerun <a href="../html/writeGATlog.html">writeGATlog()</a> as described
above.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Gwen Babcock and Abigail Stamm with funding from Centers for Disease Control and Prevention.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
